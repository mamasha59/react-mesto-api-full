{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","images/ok.svg","images/error.svg","components/InfoTooltip.js","utils/auth.js","utils/api.js","components/ProtectedRoute.js","components/App.js","index.js"],"names":["Header","props","className","src","logo","alt","exact","path","email","onClick","onLogOut","to","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","handleCardClick","type","handleCardDelete","name","handleCardLike","length","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","onCardClick","onCardLike","onCardDelete","Footer","Date","getFullYear","ImagePopup","onClose","PopupWithForm","isEditProfilePopupOpen","isAddPlacePopupOpen","isEditAvatarPopupOpen","isInfoTooltipOpen","closeAllPopups","noValidate","onSubmit","title","children","EditProfilePopup","useState","setName","description","setDescription","useEffect","isOpen","e","preventDefault","onUpdateUser","id","value","onChange","target","placeholder","required","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","pattern","AddPlacePopup","setTitle","setLink","Login","handleChange","onEnter","data","password","onAutorization","Register","setData","onRegister","InfoTooltip","texts","titleOne","titleTwo","isRegisterSuccessful","ok","err","BASE_URL","checkResponse","res","json","Promise","reject","status","newApi","options","this","baseUrl","headers","fetch","then","_checkResponse","method","body","JSON","stringify","cardId","_putLike","_deleteLike","authorization","localStorage","getItem","ProtectedRoute","Component","component","loggedIn","App","setIsEditAvatarPopupOpen","setIsEditProfilePopupOpen","setIsAddPlacePopupOpen","selectedCard","setCard","setCurrentUser","setCards","setLoggedIn","pathname","useLocation","history","useHistory","setInfoToolTipOpen","registerStatus","setRegisterStatus","push","tokenCheck","getInitialCards","catch","console","log","getProfileInfo","window","addEventListener","evt","key","jwt","token","Provider","currentPath","removeItem","changeLikeCardStatus","newCard","state","c","deleteCard","filter","Auth","setItem","setToken","user","editProfileInfo","picture","addNewCard","addNewAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3dcc2c95.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from \"react\";\nimport logo from '../images/logo.svg';\nimport {Link, Route} from \"react-router-dom\";\n\n\nfunction Header(props) {\n\n  return (\n    <header className=\"header root__header\">\n      <img src={logo} alt=\"логотип сайта\" className=\"header__logo\"/>\n      <Route exact path='/'>\n        <div className=\"header__group\">\n          <p className=\"header__email\">{props.email}</p>\n          <button className=\"header__button\" onClick={props.onLogOut}>Выйти</button>\n        </div>\n      </Route>\n      <Route path='/signup'>\n        <Link className='header__auth-link' to='signin'>Войти</Link>\n      </Route>\n      <Route path='/signin'>\n        <Link className='header__auth-link' to='signup'>Регистрация</Link>\n      </Route>\n    </header>\n  );\n}\n\nexport default Header;\n\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n\n  function handleClick() {\n    props.handleCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.handleCardLike(props.card);\n  }\n\n  function handleCardDelete() {\n    props.handleCardDelete(props.card);\n  }\n\n  const currentUser = React.useContext(CurrentUserContext);\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = props.card.owner === currentUser._id;\n\n// Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (\n    `elements__button-delite ${isOwn ? 'elements__button-delite' : 'elements__button-delite_hidden'}`\n  );\n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = props.card.likes.some(i => i === currentUser._id);\n\n// Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (\n    `elements__button-like ${isLiked ? 'elements__button-like_black' : 'elements__button-like'}`\n  );\n\n  return (\n    (\n      <div className=\"elements__item\">\n        <img src={props.card.link} className=\"elements__image\" alt=\"место в России\" onClick={handleClick}/>\n        <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleCardDelete}>\n        </button>\n        <div className=\"elements__name\">\n          <h2 className=\"elements__title\">{props.card.name}</h2>\n          <div className=\"elements__group\">\n            <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}>\n            </button>\n            <p className=\"elements__counter\">{props.card.likes.length}</p>\n          </div>\n        </div>\n      </div>\n    )\n  )\n}\n\nexport default Card\n","import React from \"react\";\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img src={currentUser.avatar} alt=\"аватар пользователя\" className=\"profile__avatar\"/>\n          <button className=\"profile__avatar-edit\"\n                  onClick={props.onEditAvatar}>\n          </button>\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button type=\"button\" className=\"profile__edit-button\"\n                  onClick={props.onEditProfile}>\n          </button>\n          <p className=\"profile__profession\">{currentUser.about}</p>\n        </div>\n        <button type=\"button\" className=\"profile__add-button\"\n                onClick={props.onAddPlace}>\n        </button>\n      </section>\n      <section className=\"elements root__elements\">\n        {\n          props.cards.map((card, i) => (\n            <Card key={card._id} handleCardClick={props.onCardClick}\n                  handleCardLike={props.onCardLike} handleCardDelete={props.onCardDelete}\n                  card={card}\n            />\n          ))\n        }\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__text\">&#169; {new Date().getFullYear()} Антонина Полякова</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from \"react\";\n\nfunction ImagePopup(props) {\n  return (\n    <div className={`popup popup_dark popup-preview ${props.card ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container-preview\">\n        <button type=\"button\" className=\"popup__close-button\"\n                onClick={props.onClose}>\n        </button>\n        <img src={props.card ? props.card.link : ''} alt=\"изображение достопримечательности в России\"\n             className=\"popup__image\"/>\n        <p className=\"popup__preview-title\">{props.card ? props.card.name : ''}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from \"react\";\n\nfunction PopupWithForm(props) {\n\n  return (\n    <div className={`popup popup-${props.name} ${props.isEditProfilePopupOpen ||\n    props.isAddPlacePopupOpen || props.isEditAvatarPopupOpen || props.isInfoTooltipOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\"\n                onClick={props.closeAllPopups}>\n        </button>\n        <form name={`${props.name}`} className=\"popup__form\" noValidate onSubmit={props.onSubmit}>\n          <h2 className=\"popup__title\">{props.title}</h2>\n          {props.children}\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup(props) {\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n// Подписка на контекст\n  const currentUser = React.useContext(CurrentUserContext);\n\n// После загрузки текущего пользователя из API\n// его данные будут использованы в управляемых компонентах.\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    props.onUpdateUser({\n      name: name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm name=\"user\" title=\"Редактировать профиль\" isEditProfilePopupOpen={props.isOpen}\n                   closeAllPopups={props.onClose} onSubmit={handleSubmit}>\n      <label>\n        <input id=\"user-input\" type=\"text\" name=\"name\" value={name} onChange={handleChangeName}\n               className=\"popup__input popup__input-name\"\n               placeholder=\"Имя\" required minLength=\"2\" maxLength=\"40\"/>\n        <span className=\"popup__input-error user-input-error\">\n            </span>\n      </label>\n      <label>\n        <input id=\"job-input\" type=\"text\" name=\"profession\" value={description} onChange={handleChangeDescription}\n               className=\"popup__input popup__input-job\"\n               placeholder=\"О себе\" required minLength=\"2\" maxLength=\"200\"/>\n        <span className=\"popup__input-error job-input-error\">\n            </span>\n      </label>\n      <button type=\"submit\" className=\"popup__button\" onClick={props.onClose}>Сохранить</button>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = React.useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value\n    });\n    avatarRef.current.value = '';\n  }\n\n  return (\n    <PopupWithForm name=\"avatar\" title=\"Обновить аватар?\" isEditAvatarPopupOpen={props.isOpen}\n                   closeAllPopups={props.onClose} onSubmit={handleSubmit}>\n      <label>\n        <input id=\"input\" type=\"url\" name=\"image\" ref={avatarRef}\n               className=\"popup__input popup__input_small popup__input-image\"\n               placeholder=\"Ссылка на картинку\" required pattern=\"https?://.+\"/>\n        <span className=\"popup__input-error input-error\">\n              </span>\n      </label>\n      <button type=\"submit\" className=\"popup__button popup__button_small popup__button-place\"\n              onClick={props.onClose}>Создать\n      </button>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n\n  const [title, setTitle] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleChangeTitle(e) {\n    setTitle(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    props.onAddPlace({\n      name: title,\n      link: link,\n    });\n\n    setTitle('');\n    setLink('');\n  }\n\n  return (\n    <PopupWithForm name=\"place\" title=\"Новое место\" isAddPlacePopupOpen={props.isOpen}\n                   closeAllPopups={props.onClose} onSubmit={handleSubmit}>\n      <label>\n        <input id=\"place-input\" type=\"text\" name=\"place-title\" value={title} onChange={handleChangeTitle}\n               className=\"popup__input popup__input_small popup__input-place-title\"\n               placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\"/>\n        <span className=\"popup__input-error place-input-error\">\n        </span>\n      </label>\n      <label>\n        <input id=\"link-input\" type=\"url\" name=\"image\" value={link} onChange={handleChangeLink}\n               className=\"popup__input popup__input_small popup__input-image\"\n               placeholder=\"Ссылка на картинку\" required pattern=\"https?://.+\"/>\n        <span className=\"popup__input-error link-input-error\">\n        </span>\n      </label>\n      <button type=\"submit\" className=\"popup__button popup__button_small popup__button-place\"\n              onClick={props.onClose}>Создать\n      </button>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n","import React from \"react\";\n\nfunction Login(props) {\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    props.onEnter({\n      ...props.data,\n      [name]: value\n    })\n  }\n\n  function handleSubmit(e) {\n    const {email, password} = props.data;\n    e.preventDefault();\n    props.onAutorization({email, password})\n  }\n\n  return (\n    <form className=\"popup__form popup__form_login\" onSubmit={handleSubmit}>\n      <h3 className=\"popup__title popup__title_login\">Вход</h3>\n      <label>\n        <input id=\"email\" type=\"email\" name=\"email\" value={props.data.email}\n               className=\"popup__input popup__input_login\"\n               placeholder=\"Email\" required minLength=\"2\" maxLength=\"40\"\n               pattern=\"([A-z0-9_.-]{1,})@([A-z0-9_.-]{1,}).([A-z]{2,8})\" onChange={handleChange}/>\n        <span className=\"popup__input-error\">\n            </span>\n      </label>\n      <label>\n        <input id=\"password\" type=\"password\" name=\"password\" value={props.data.password}\n               className=\"popup__input popup__input_login\"\n               placeholder=\"Пароль\" required minLength=\"2\" maxLength=\"10\" onChange={handleChange}/>\n        <span className=\"popup__input-error\">\n            </span>\n      </label>\n      <button type=\"submit\" className=\"popup__button popup__button_login\">Войти</button>\n      <p className=\"popup__subtitle\"></p>\n    </form>\n  )\n}\n\nexport default Login\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\n\nfunction Register(props) {\n\nconst [data, setData] = React.useState({\n  email: '',\n  password: ''\n});\n\n  function handleSubmit(e) {\n    const {email, password} = data;\n    e.preventDefault();\n    props.onRegister({email, password})\n  }\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    })\n  }\n\n  return(\n  <form onSubmit={handleSubmit} className=\"popup__form popup__form_login\">\n    <h3 className=\"popup__title popup__title_login\">Регистрация</h3>\n    <label>\n      <input id=\"email\" type=\"email\" name=\"email\" value={data.email}\n             className=\"popup__input popup__input_login\"\n             placeholder=\"Email\" required minLength=\"2\" maxLength=\"40\"\n             onChange={handleChange}/>\n      <span className=\"popup__input-error\">\n            </span>\n    </label>\n    <label>\n      <input id=\"password\" type=\"password\" name=\"password\" value={data.password}\n             className=\"popup__input popup__input_login\"\n             placeholder=\"Пароль\" required minLength=\"2\" maxLength=\"10\" onChange={handleChange}/>\n      <span className=\"popup__input-error\">\n            </span>\n    </label>\n    <button type=\"submit\" className=\"popup__button popup__button_login\">Зарегистрироваться</button>\n    <p className=\"popup__subtitle\">Уже зарегистрированы? <Link to='/sign-in' className=\"link\">Войти</Link></p>\n  </form>\n)\n}\n\nexport default Register\n","export default __webpack_public_path__ + \"static/media/ok.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ok from \"../images/ok.svg\";\nimport err from \"../images/error.svg\";\n\n\nfunction InfoTooltip(props) {\n\n  const texts = {\n    titleOne: 'Вы успешно зарегистрировались!',\n    titleTwo: 'Что-то пошло не так!\\n' +\n      'Попробуйте ещё раз.'\n  }\n\n  return(\n    <PopupWithForm name=\"registration_ok\" closeAllPopups={props.onClose} isInfoTooltipOpen={props.isOpen}>\n      <img src={props.isRegisterSuccessful ? ok : err} alt=\"значок статуса регистрации\" className=\"popup__reg-ico\"/>\n      <h3 className=\"popup__title popup__title_reg\">\n        {props.isRegisterSuccessful ? texts.titleOne : texts.titleTwo}</h3>\n    </PopupWithForm>\n  )\n}\n\nexport default InfoTooltip\n\n","export const BASE_URL = 'https://api.future.bright.nomoredomains.club';\n\nexport const registration = ({email, password}) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {'Accept': 'application/json',\n              \"Content-Type\": \"application/json\"} ,\n    body: JSON.stringify({email, password})\n  })\n    .then(checkResponse)\n}\n\nexport const authorization = ({email, password}) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {'Accept': 'application/json',\n              \"Content-Type\": \"application/json\"},\n    body: JSON.stringify({email, password})\n  })\n    .then(checkResponse)\n}\n\nexport const getContent = (token) => {\n  return fetch(BASE_URL + '/users/me', {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  })\n    .then(checkResponse)\n}\n\nexport const checkResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка ${res.status}`);\n}\n\n","class Api {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  // запрос данных пользователя с сервера\n  getProfileInfo() {\n    return fetch(this.baseUrl + 'users/me', {\n      headers: this.headers\n    })\n      .then(this._checkResponse)\n  }\n\n  // редактирование данных пользователя\n  editProfileInfo(name, about) {\n    return fetch(this.baseUrl + 'users/me', {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n      .then(this._checkResponse)\n  }\n\n  // загрузка массива карточек с сервера\n  getInitialCards() {\n    return fetch(this.baseUrl + 'cards', {\n      headers: this.headers\n    })\n      .then(this._checkResponse)\n  }\n\n// добавление новой карточки\n  addNewCard(name, link) {\n    return fetch(this.baseUrl + 'cards', {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n      .then(this._checkResponse)\n  }\n\n// редактирование аватара\n  addNewAvatar(avatar) {\n    return fetch(this.baseUrl + 'users/me/avatar', {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: avatar,\n      })\n    })\n      .then(this._checkResponse)\n  }\n\n  // удаление карточки\n  deleteCard(cardId) {\n    return fetch(this.baseUrl + `cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this.headers,\n    })\n      .then(this._checkResponse)\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._putLike(cardId)\n    } else {\n      return this._deleteLike(cardId)\n    }\n  }\n\n  //поставить лайк\n  _putLike(cardId) {\n    return fetch(this.baseUrl + `cards/${cardId}/likes`, {\n      method: 'PUT',\n      headers: this.headers,\n    })\n      .then(this._checkResponse)\n  }\n\n  //удалить лайк\n  _deleteLike(cardId) {\n    return fetch(this.baseUrl + `cards/${cardId}/likes`, {\n      method: 'DELETE',\n      headers: this.headers,\n    })\n      .then(this._checkResponse)\n  }\n\n  setToken() {\n    this.headers.authorization = `Bearer ${localStorage.getItem('jwt')}`;\n  }\n\n}\n\nconst newApi = new Api({\n\n  baseUrl: 'https://api.future.bright.nomoredomains.club/',\n  headers: {\n    authorization: `Bearer ${localStorage.getItem('jwt')}`,\n    'Content-Type': 'application/json'\n  }\n})\n\nexport default newApi\n","import React from 'react';\nimport {Route, Redirect} from 'react-router-dom';\n\n\n\nfunction ProtectedRoute({component: Component, ...props}) {\n  return <Route>\n    function () {\n    props.loggedIn ? <Component {...props}/> : <Redirect to='/login'/>\n  }\n  </Route>}\n\nexport default ProtectedRoute;\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport * as Auth from \"../utils/auth\";\nimport newApi from \"../utils/api\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport {Route, Switch, Redirect, useLocation, useHistory} from \"react-router-dom\";\nimport ProtectedRoute from \"./ProtectedRoute\";\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [selectedCard, setCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({name: '', about: '', avatar: '', email: ''});\n  const [cards, setCards] = React.useState([]);\n\n  //константы для регистрации, авторизации\n  const [data, setData] = React.useState({\n    email: '',\n    password: ''\n  });\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  //переход по ссылкам в шапке профиля регистрация-войти\n  const {pathname} = useLocation();\n  const history = useHistory();\n  const [isInfoTooltipOpen, setInfoToolTipOpen] = React.useState(false);\n  const [registerStatus, setRegisterStatus] = React.useState(false);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [history, loggedIn])\n\n  React.useEffect(() => {\n        tokenCheck();\n  }, [history, loggedIn])\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    newApi.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }\n\n  function handleCardDelete(card) {\n    newApi.deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }\n\n  React.useEffect(() => {\n    newApi.getInitialCards()\n      .then((data) => {\n        setCards(data)\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }, [history, loggedIn])\n\n  React.useEffect(() => {\n    newApi.getProfileInfo()\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }, [history, loggedIn]);\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setCard(card);\n  }\n\n  function handleUpdateUser(user) {\n    newApi.editProfileInfo(user.name, user.about)\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }\n\n  function handleUpdateAvatar(user) {\n    newApi.addNewAvatar(user.avatar)\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }\n\n  function handleAddPlaceSubmit(picture) {\n    newApi.addNewCard(picture.name, picture.link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }\n\n  function closeAllPopups() {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setCard(null)\n    setInfoToolTipOpen(false);\n  }\n\n  React.useEffect(() => {\n    // закрытие попапа кликом на esc\n    function handleEscClose(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n\n    window.addEventListener('keydown', handleEscClose);\n  }, [])\n\n  //методы для регистрации, авторизации\n  function handleRegistration({email, password}) {\n    Auth.registration({email, password})\n      .then(() => {\n        setRegisterStatus(true)\n        setInfoToolTipOpen(true);\n        history.push('/signin')\n      })\n      .catch(() => {\n        setRegisterStatus(false)\n        setInfoToolTipOpen(true);\n      })\n  }\n\n  function handleAuthorization({email, password}) {\n    Auth.authorization({email, password})\n      .then((data) => {\n        localStorage.setItem('jwt', data.token);\n        newApi.setToken();\n        setLoggedIn(true);\n        history.push('/');\n      })\n      .catch((err) => {\n        console.log('error', err)\n      })\n  }\n\n  const tokenCheck = () => {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt)\n        .then(({email}) => {\n          if (email) {\n            setLoggedIn(true);\n          }\n        })\n        .catch((err) => {\n          console.log('error', err)\n        })\n    }\n  }\n\n  function handleLogOut() {\n    localStorage.removeItem('jwt');\n    setData({\n      email: '',\n      password: ''\n    });\n    setLoggedIn(false);\n    history.push('/signin');\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <div className=\"page\">\n          <Header currentPath={pathname}\n                  onLogOut={handleLogOut}\n                  email={currentUser.email}\n          />\n          <Switch>\n            <ProtectedRoute\n              exact path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              onEditProfile={handleEditProfileClick}\n              onEditAvatar={handleEditAvatarClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n            />\n            <Route path=\"/signin\">\n              <Login\n                data={data}\n                onEnter={setData}\n                onAutorization={handleAuthorization}/>\n            </Route>\n            <Route path=\"/signup\">\n              <Register onRegister={handleRegistration}/>\n            </Route>\n            <Route>\n              {loggedIn ? (<Redirect to=\"/\"/>) : (<Redirect to=\"/signin\"/>)}\n            </Route>\n          </Switch>\n          {loggedIn && <Footer/>}\n          <EditProfilePopup isOpen={isEditProfilePopupOpen}\n                            onClose={closeAllPopups}\n                            onUpdateUser={handleUpdateUser}/>\n          <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                         onClose={closeAllPopups}\n                         onAddPlace={handleAddPlaceSubmit}/>\n\n          <ImagePopup onClose={closeAllPopups} card={selectedCard}/>\n\n          <PopupWithForm name=\"popup-delete-card\" title=\"Вы уверены?\">\n            <button type=\"submit\" className=\"popup__button popup__button_small popup__button-place\">Да</button>\n          </PopupWithForm>\n\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups}\n                           onUpdateAvatar={handleUpdateAvatar}/>\n          <InfoTooltip isOpen={isInfoTooltipOpen}\n                       isRegisterSuccessful={registerStatus}\n                       onClose={closeAllPopups}/>\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter} from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}